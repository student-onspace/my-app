pipeline{
    agent any
    stages{
    stage('Git Checkout'){
    steps{
    git branch: 'main', url: 'https://github.com/student-onspace/my-app.git'
	}
    }
	
	stage('Maven Build'){
	steps{
		sh 'mvn clean package'
	}
	}
	stage("docker image build"){
            steps{
                sh "docker build -t devopsonspace/my-app:v1.0 ."
            }
        }
        stage("docker image push"){
            steps{
                withCredentials([string(credentialsId: 'dockerhub_creds', variable: 'docker_password')]) {
                    sh "docker login -u devopsonspace -p ${docker_password}"
                    sh "docker push devopsonspace/my-app:v1.0"
                }
                
            }
        }
 }
 }


